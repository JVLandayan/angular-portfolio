<app-portfolio-navbar
  [title]="title()"
  [navItems]="navItems()"
  [currentSection]="currentSection()"
  [isMenuOpen]="isMenuOpen()"
  (toggleMenu)="toggleMenu()"
  (scrollToSection)="scrollToSection($event)"
  (scrollToSectionMobile)="scrollToSectionMobile($event)"
></app-portfolio-navbar>

<main class="app-container animated-gradient-bg text-white relative z-10">
  <div class="glass-orb glass-orb-purple" style="top: 10%; left: 5%; width: 400px; height: 400px; background: var(--glass-accent-500);"></div>
  <div class="glass-orb glass-orb-pink" style="top: 30%; right: 10%; width: 350px; height: 350px; background: #ec4899;"></div>
  <div class="glass-orb glass-orb-blue" style="bottom: 20%; left: 20%; width: 300px; height: 300px; background: var(--glass-secondary-500);"></div>
  <div class="glass-orb glass-orb-purple" style="bottom: 10%; right: 5%; width: 450px; height: 450px; background: var(--glass-accent-600);"></div>

  <app-hero-section (scrollToSection)="scrollToSection($event)"></app-hero-section>
  <app-about-section></app-about-section>
  <app-skills-section [skills]="skills()"></app-skills-section>
  <app-projects-section
    [groupedProjects]="groupedProjects()"
    [isProjectGroup]="isProjectGroup.bind(this)"
    (openProjectModal)="openProjectModal($event)"
  ></app-projects-section>
  <app-experience-section
    [experience]="experience()"
    [otherExperience]="otherExperience()"
  ></app-experience-section>
  <app-certifications-section [certifications]="certifications()"></app-certifications-section>
  <app-contact-section></app-contact-section>

  <footer class="footer-glass bg-gray-900 border-t border-gray-800 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <div class="border-t border-gray-800 pt-8">
          <p class="text-gray-400">
            &copy; {{ getCurrentYear() }} {{ title() }}. Built with Angular & Tailwind CSS.
          </p>
        </div>
      </div>
    </div>
  </footer>
</main>

@if (isModalOpen()) {
  <div class="fixed inset-0 bg-gray-900/75 flex items-center justify-center z-50 backdrop-blur-sm">
    <div class="modal-glass rounded-2xl p-8 max-w-lg w-full mx-4 border border-gray-700/50">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-semibold text-white">{{ selectedProjectGroup()?.baseTitle }}</h3>
        <button
          (click)="closeModal()"
          class="text-gray-400 hover:text-white transition-colors duration-200"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <p class="text-gray-300 mb-8">{{ selectedProjectGroup()?.description }}</p>

      <div class="space-y-4">
        <h4 class="text-xl font-semibold text-white mb-6">Select Tech Stack:</h4>
        @for (variant of selectedProjectGroup()?.variants || []; track variant.techType) {
          <div class="glass-dark rounded-lg p-4 hover:bg-gray-700/70 transition-all duration-200 border border-gray-600/30">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center space-x-3">
                <div class="w-3 h-3 bg-primary-500 rounded-full"></div>
                <span class="text-white font-semibold text-lg">{{ variant.techType }}</span>
              </div>
              <span class="badge-glass px-3 py-1.5 rounded-full text-sm font-semibold">
                {{ variant.techType === 'UI' ? 'Frontend' : 'Backend' }}
              </span>
            </div>

            <div class="flex flex-wrap gap-2 mb-4">
              @for (tech of variant.technologies; track tech) {
                <span class="tag-glass px-2 py-1 rounded text-xs">
                  {{ tech }}
                </span>
              }
            </div>

            <a
              [href]="variant.codeLink"
              target="_blank"
              class="inline-flex items-center space-x-2 btn-glass-primary px-4 py-2 rounded-lg font-semibold transition-colors duration-200"
            >
              @if (variant.private) {
                <span>Source Code Upon Request (Private)</span>
              } @else {
                <span>View {{ variant.techType }} Code</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                </svg>
              }
            </a>
          </div>
        }
      </div>
    </div>
  </div>
}
